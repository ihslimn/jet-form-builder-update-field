(()=>{"use strict";var e="jfb_update_fields_options_enabled",t="jfb_update_fields_value_enabled",n="jfb_update_fields_update_on_button",l="jfb_update_fields_button_name",r="jfb_update_fields_field_to_listen",o="jfb_update_fields_callback",i="jfb_update_fields_listen_all",a={"jet-forms/select-field":"options","jet-forms/radio-field":"options","jet-forms/checkbox-field":"options","jet-forms/text-field":"value","jet-forms/textarea-field":"value","jet-forms/hidden-field":"value","jet-forms/submit-field":"update_other"};function u(e){return u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},u(e)}function c(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);t&&(l=l.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,l)}return n}function s(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?c(Object(n),!0).forEach((function(t){p(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):c(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function p(e,t,n){return(t=function(e){var t=function(e,t){if("object"!==u(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var l=n.call(e,"string");if("object"!==u(l))return l;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"===u(t)?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function f(e){return f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},f(e)}function m(e,t,n){return(t=function(e){var t=function(e,t){if("object"!==f(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var l=n.call(e,"string");if("object"!==f(l))return l;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"===f(t)?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var d=wp.hooks.addFilter,b=wp.compose.createHigherOrderComponent,y=wp.blockEditor.InspectorControls,g=wp.components,w=g.TextControl,v=g.ToggleControl,h=g.Panel,E=g.PanelRow,j=g.PanelBody,_=b((function(u){return function(c){var s=c.name,p=a[s]||!1;if(!p)return wp.element.createElement(u,c);var f=c.attributes,d=c.setAttributes,b=c.isSelected;return wp.element.createElement(React.Fragment,null,wp.element.createElement(u,c),b&&wp.element.createElement(y,null,wp.element.createElement(h,null,("update_other"!==p||"update"===(null==f?void 0:f.action_type))&&wp.element.createElement(j,{title:"Field updater",initialOpen:!1},"update_other"===p&&"update"===(null==f?void 0:f.action_type)&&wp.element.createElement(E,null,wp.element.createElement(w,{label:"Button name",help:"Latin lowercase letters, underscore, dash, numbers.",value:f[l],onChange:function(e){d(m({},l,e))}})),"options"===p&&wp.element.createElement(E,null,wp.element.createElement(v,{label:"Enable options updater",help:f[e]?"Enabled.":"Disabled.",checked:f[e],onChange:function(){d(m({},e,!f[e]))}})),"value"===p&&wp.element.createElement(E,null,wp.element.createElement(v,{label:"Enable value updater",help:f[t]?"Enabled.":"Disabled.",checked:f[t],onChange:function(){d(m({},t,!f[t]))}})),(f[e]||f[t])&&wp.element.createElement(E,null,wp.element.createElement(v,{label:"Update on action button",help:f[n]?"Yes.":"No.",checked:f[n],onChange:function(){d(m({},n,!f[n]))}})),(f[e]||f[t])&&f[n]&&wp.element.createElement(E,null,wp.element.createElement(w,{label:"Button name",help:"",value:f[l],onChange:function(e){d(m({},l,e))}})),(f[e]||f[t])&&!f[n]&&wp.element.createElement(E,null,wp.element.createElement(w,{label:"Fields to listen",help:"comma-separated",value:f[r],onChange:function(e){d(m({},r,e))}})),(f[e]||f[t])&&!f[n]&&wp.element.createElement(E,null,wp.element.createElement(v,{label:"Listen all",help:f[i]?"Yes.":"No.",checked:f[i],onChange:function(){d(m({},i,!f[i]))}})),"value"===p&&f[t]&&wp.element.createElement(E,null,wp.element.createElement(w,{label:"Callback or query parameters",value:f[o],help:"Callback which parameters are $field_name (this field name), $form_id (this form ID), $form_fields (array of all form fields). Alternatively JetEngine query_id|property to get a specified propery from the first object from query.",onChange:function(e){d(m({},o,e))}}))))))}}),"addControls");d("editor.BlockEdit","jet-form-builder/update-fields",_);var O=wp.blocks.registerBlockType,k=wp.components.TextControl;wp.element.createElement;(0,wp.hooks.addFilter)("blocks.registerBlockType","jfb-update-field/block-attributes",(function(u,c){var f;return a[c]?(u.attributes=s(s({},u.attributes),{},(p(f={},e,{type:"boolean",default:!1}),p(f,t,{type:"boolean",default:!1}),p(f,r,{type:"string",default:""}),p(f,i,{type:"boolean",default:!1}),p(f,o,{type:"string",default:""}),p(f,n,{type:"boolean",default:!1}),p(f,l,{type:"string",default:""}),f)),u):u})),document.addEventListener("jet-form-builder-initialized",(function(){O("jfb-update-field/listing-updater",{title:"Listing Updater",icon:"update",category:"jet-form-builder-elements",description:"Use this block to update a listing upon field value change.",attributes:{listingIds:{type:"string",default:""},fieldsToListen:{type:"string",default:""}},edit:function(e){return wp.element.createElement(React.Fragment,null,wp.element.createElement("div",null,wp.element.createElement(k,{label:"Listing IDs",value:e.attributes.listingIds,onChange:function(t){e.setAttributes({listingIds:t})}}),wp.element.createElement(k,{label:"Fields to listen",value:e.attributes.fieldsToListen,onChange:function(t){e.setAttributes({fieldsToListen:t})}})))},save:function(e){return wp.element.createElement("div",{class:"jfbuf-listing-updater","data-listing-ids":e.attributes.listingIds,"data-fields-to-listen":e.attributes.fieldsToListen})}})}))})();