(()=>{"use strict";var e="jfb_update_fields_options_enabled",t="jfb_update_fields_value_enabled",n="jfb_update_fields_update_on_button",l="jfb_update_fields_button_name",r="jfb_update_fields_field_to_listen",o="jfb_update_fields_callback",a="jfb_update_fields_listen_all",i="jfb_update_fields_cache_enabled",u="jfb_update_fields_cache_timeout",c={"jet-forms/select-field":"options","jet-forms/radio-field":"options","jet-forms/checkbox-field":"options","jet-forms/text-field":"value","jet-forms/number-field":"value","jet-forms/textarea-field":"value","jet-forms/hidden-field":"value","jet-forms/submit-field":"update_other"};function p(e){return p="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},p(e)}function m(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);t&&(l=l.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,l)}return n}function f(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?m(Object(n),!0).forEach((function(t){d(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):m(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function d(e,t,n){return(t=function(e){var t=function(e){if("object"!=p(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=p(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==p(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function s(e){return s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},s(e)}function b(e,t,n){return(t=function(e){var t=function(e){if("object"!=s(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=s(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==s(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var y=wp.hooks.addFilter,h=wp.compose.createHigherOrderComponent,w=wp.blockEditor.InspectorControls,_=wp.components,v=_.TextControl,E=_.ToggleControl,j=_.Panel,g=_.PanelRow,k=_.PanelBody,C=h((function(p){return function(m){var f=m.name,d=c[f]||!1;if(!d)return wp.element.createElement(p,m);var s=m.attributes,y=m.setAttributes,h=m.isSelected;return wp.element.createElement(React.Fragment,null,wp.element.createElement(p,m),h&&wp.element.createElement(w,null,wp.element.createElement(j,null,("update_other"!==d||"update"===(null==s?void 0:s.action_type))&&wp.element.createElement(k,{title:"Field updater",initialOpen:!1},"update_other"===d&&"update"===(null==s?void 0:s.action_type)&&wp.element.createElement(g,null,wp.element.createElement(v,{label:"Button name",help:"Latin lowercase letters, underscore, dash, numbers.",value:s[l],onChange:function(e){y(b({},l,e))}})),"options"===d&&wp.element.createElement(g,null,wp.element.createElement(E,{label:"Enable options updater",help:s[e]?"Enabled.":"Disabled.",checked:s[e],onChange:function(){y(b({},e,!s[e]))}})),"value"===d&&wp.element.createElement(g,null,wp.element.createElement(E,{label:"Enable value updater",help:s[t]?"Enabled.":"Disabled.",checked:s[t],onChange:function(){y(b({},t,!s[t]))}})),(s[e]||s[t])&&wp.element.createElement(g,null,wp.element.createElement(E,{label:"Update on action button",help:s[n]?"Yes.":"No.",checked:s[n],onChange:function(){y(b({},n,!s[n]))}})),(s[e]||s[t])&&s[n]&&wp.element.createElement(g,null,wp.element.createElement(v,{label:"Button name",help:"",value:s[l],onChange:function(e){y(b({},l,e))}})),(s[e]||s[t])&&!s[n]&&wp.element.createElement(g,null,wp.element.createElement(v,{label:"Fields to listen",help:"comma-separated",value:s[r],onChange:function(e){y(b({},r,e))}})),(s[e]||s[t])&&!s[n]&&wp.element.createElement(g,null,wp.element.createElement(E,{label:"Listen all",help:s[a]?"Yes.":"No.",checked:s[a],onChange:function(){y(b({},a,!s[a]))}})),"value"===d&&s[t]&&wp.element.createElement(g,null,wp.element.createElement(v,{label:"Callback or query parameters",value:s[o],help:"Callback which parameters are $field_name (this field name), $form_id (this form ID), $form_fields (array of all form fields). Alternatively JetEngine query_id|property to get a specified propery from the first object from query.",onChange:function(e){y(b({},o,e))}})),(s[e]||s[t])&&wp.element.createElement(g,null,wp.element.createElement(E,{label:"Enable cache",help:s[i]?"Yes.":"No.",checked:s[i],onChange:function(){y(b({},i,!s[i]))}})),(s[e]||s[t])&&s[i]&&wp.element.createElement(g,null,wp.element.createElement(v,{type:"number",label:"Cache timeout",help:"Cache timeout in seconds; -1 for unlimited cache time. Cache is cleared on page reload.",min:"-1",max:"86400",value:s[u],onChange:function(e){y(b({},u,e))}}))))))}}),"addControls");y("editor.BlockEdit","jet-form-builder/update-fields",C),wp.blocks.registerBlockType,wp.components.TextControl,wp.element.createElement;var O=wp.blocks.registerBlockVariation,P={name:"update",title:"Update Field",isActive:["action_type"],description:"Update fields that are dependent on this button",icon:"update-alt",scope:["block","inserter","transform"],attributes:{action_type:"update"}};(0,wp.hooks.addFilter)("blocks.registerBlockType","jfb-update-field/block-attributes",(function(p,m){return c[m]?(p.attributes=f(f({},p.attributes),{},d(d(d(d(d(d(d(d(d({},e,{type:"boolean",default:!1}),t,{type:"boolean",default:!1}),r,{type:"string",default:""}),a,{type:"boolean",default:!1}),o,{type:"string",default:""}),n,{type:"boolean",default:!1}),l,{type:"string",default:""}),i,{type:"boolean",default:!0}),u,{type:"string",default:"60"})),p):p})),document.addEventListener("jet-form-builder-initialized",(function(){O("jet-forms/submit-field",P)}))})();